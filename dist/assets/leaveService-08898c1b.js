const c="ems_leaves";function r(){try{return JSON.parse(localStorage.getItem(c))||[]}catch{return[]}}function s(e){try{localStorage.setItem(c,JSON.stringify(e))}catch{}}const l={async apply(e){const t=r(),a={id:"l"+Date.now(),...e,status:"pending",requestedAt:new Date().toISOString()};return t.push(a),s(t),{data:a}},async listAll(){return{data:r()}},async listByEmployee(e){return{data:r().filter(t=>t.employeeId===e)}},async approve(e){const t=r(),a=t.find(n=>n.id===e);return a&&(a.status="approved"),s(t),{data:!0}},async reject(e){const t=r(),a=t.find(n=>n.id===e);return a&&(a.status="rejected"),s(t),{data:!0}}};export{l};
